{"version":3,"sources":["images/background.jpg","components/StartPage/index.js","hooks/useWindowDimensions.js","components/StatusRow/index.js","components/LoseGame/index.js","components/Stage/index.js","components/Center/index.js","utils/Utils.js","components/Game/index.js","hooks/useInterval.js","components/Tetris/index.js","index.js","App.js"],"names":["module","exports","StyledStartPage","styled","div","StartButton","button","StartPage","startClick","onClick","getWindowDimensions","window","width","innerWidth","height","innerHeight","Container","props","backgroundColor","borderSize","portrait","padding","margin","Title","Value","StatusRow","title","value","CenterOverlay","LoseContainer","pixelSize","theme3d","ContainerStatus","ContainerButton","Button","LoseGame","status","restartClick","score","level","lines","Game","background","ContainerNext","Next","StyledStage","Center","Row","stage","Pixel","React","memo","fill","color","zIndex","paused","topBloco","Color","lighten","hint","playerColor","alpha","ContainerSwitch","Stage","lose","map","player","others","useState","setPixelSize","setPortrait","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","setTheme3d","nextRender","setNextRender","stageRef","useRef","pixelSizeHeight","pixelSizeWidth","next","bloco","trimRowBloco","sumColumn","forEach","row","y","rowSum","pixel","push","x","trimBloco","newRow","getRenderizacaoBloco","current","focus","key","onChange","checked","offColor","onColor","uncheckedIcon","checkedIcon","ref","playerFill","pos","playerHint","PrintPlayerInMap","newMap","arr","slice","length","pixelY","pixelX","initialMap","Array","colors","I","O","T","J","L","S","Z","getRandomBloco","blocos","Math","floor","random","getRandomPlayer","JSON","parse","stringify","STAGE_WIDTH","setMap","setPlayer","down","setDown","pause","setPause","Date","now","tick","setTick","hintPlayer","setHintPlayer","spaceReleased","setSpaceReleased","setlines","setScore","setLevel","dragX","setDragX","dragY","setDragY","gameOver","setGameOver","nextLevel","nextLevelScore","console","log","loseGame","drop","newPos","getNewPlayerPos","mapWithPlayer","checkMap","newPlayer","validatePosition","rotatePlayer","clonedPlayer","mtrx","_","index","column","reverse","forwardDown","playerCopy","useCallback","rowsClear","clear","mapY","quant","bonusLevel","bonusRows","mapX","calculateHintPlayer","hintBloco","hintPosition","movement","callback","delay","savedCallback","id","setInterval","clearInterval","useInterval","bind","useDrag","mx","my","velocity","abs","filterTaps","lockDirection","onBlur","onFocus","tabIndex","onKeyUp","keyCode","onKeyDown","Tetris","runing","setRuning","stopClick","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.ba5de44f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/background.d84b2ac8.jpg\";","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst StyledStartPage = styled.div`\n\twidth: 100vw;\n\theight: 100vh;\n\toverflow: hidden;\n\tbackground-color: #e3b505;\n`;\n\nconst StartButton = styled.button`\n\tfont-size: 2.2em;\n\tfont-family: \"ZCOOL QingKe HuangYou\", cursive;\n\t/* border: 2px solid #222; */\n\tborder: none;\n\tpadding: 30px 100px;\n\tbackground-color: #fff;\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tvertical-align: middle;\n\ttext-decoration: none;\n\ttransition: all 0.5s;\n\tcolor: #95190c;\n\tborder-right: 1px solid #eee;\n\tborder-radius: 2px;\n\tborder-bottom: 1px solid #ccc;\n\n\t:focus {\n\t\toutline: 0;\n\t}\n\n\t:hover {\n\t\tmargin-left: 5px;\n\t\tmargin-top: 5px;\n\t\t::after {\n\t\t\tright: -5px;\n\t\t\ttop: 2px;\n\t\t\twidth: 5px;\n\t\t}\n\t\t::before {\n\t\t\tright: -3px;\n\t\t\theight: 5px;\n\t\t}\n\t}\n\n\t::after {\n\t\tcontent: \"\";\n\t\theight: 100%;\n\t\twidth: 10px;\n\t\tbackground-color: #eee;\n\t\tright: -10px;\n\t\ttop: 5px;\n\t\ttransform: skewY(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n\n\t::before {\n\t\tcontent: \"\";\n\t\theight: 10px;\n\t\twidth: 100%;\n\t\tbackground-color: #ccc;\n\t\tright: -5px;\n\t\ttop: 95px;\n\t\ttransform: skewX(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n`;\n\nconst StartPage = ({ startClick }) => {\n\treturn (\n\t\t<StyledStartPage>\n\t\t\t<StartButton onClick={startClick}>Start</StartButton>\n\t\t</StyledStartPage>\n\t);\n};\nexport default StartPage;\n","import { useState, useEffect } from 'react';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height\n  };\n}\n\nexport default function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return windowDimensions;\n}","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n\tbackground-color: ${props =>\n\t\tprops.backgroundColor ? props.backgroundColor : \"black\"};\n\ttransition: background-color 0.5s;\n\tborder: ${props => (props.borderSize ? props.borderSize : \"3\")}px solid white;\n\t${props => !props.portrait && `width: 100%;`}\n\tfont-family: \"ZCOOL QingKe HuangYou\", cursive;\n\tpadding: ${props => (props.padding ? props.padding : \"15\")}px\n\t\t${props => (props.portrait ? props.padding / 2 : 0)}px; /*15*/\n\tmargin-bottom: ${props => (props.margin ? props.margin : \"10\")}px; /*10*/\n`;\n\nconst Title = styled.div`\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n`;\n\nconst Value = styled.div`\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n`;\n\nconst StatusRow = ({\n\ttitle,\n\tvalue,\n\tpadding,\n\tmargin,\n\tborderSize,\n\tportrait,\n\tbackgroundColor\n}) => (\n\t<Container\n\t\tportrait={portrait}\n\t\tpadding={padding}\n\t\tmargin={margin}\n\t\tborderSize={borderSize}\n\t\tbackgroundColor={backgroundColor}\n\t>\n\t\t<Title>{title}</Title>\n\t\t<Value>{value}</Value>\n\t</Container>\n);\n\nexport default StatusRow;\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst CenterOverlay = styled.div`\n\tposition: fixed;\n\ttop: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tz-index: 100;\n\tbackground-color: rgba(0,0,0,0.5);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst LoseContainer = styled.div`\n\ttransition: all 0.2s;\n\twidth: ${props => props.pixelSize * (props.portrait ? 12 : 20)}px;\n\theight: ${props => props.pixelSize * (props.portrait ? 20 : 10)}px;\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\tbackground-color: ${props => props.theme3d ? '#444' : '#000'};\n\tfont-size: ${props => props.pixelSize}px;\n\tfont-family: \"ZCOOL QingKe HuangYou\", cursive;\n\tcolor: white;\n\tdisplay: flex;\n\tflex-flow: column;\n`;\n\nconst Title = styled.div`\n\twidth: 100%;\n\tfont-size: 2em;\n\tpadding: ${props => props.portrait ? 10 : 2}% 0;\n\ttext-align: center;\n\tborder-bottom: 1px solid white;\n\tflex: 0 1 auto;\n`;\n\nconst ContainerStatus = styled.div`\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-evenly;\n`;\n\nconst StatusRow = styled.div`\n\ttext-align: center;\n`;\n\nconst ContainerButton = styled.div`\n\tflex: 0 1 auto;\n\tpadding: ${props => props.portrait ? 10 : 2}% 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tborder-top: 1px solid white;\n`;\n\nconst Button = styled.button`\n\twidth: ${props => props.pixelSize * 10}px;\n\theight: ${props => props.pixelSize * 2}px;\n\tfont-size: ${props => props.pixelSize / 1.5}px;\n\tfont-family: \"ZCOOL QingKe HuangYou\", cursive;\n\tcolor: white;\n\tborder: ${props => props.pixelSize / 20}px solid white;\n\tborder-radius: ${props => props.pixelSize / 10}px;\n\tbackground-color: rgba(0,0,0,0);\n\ttransition: all 0.5s;\n\n\t:hover {\n\t\tcolor: #222;\n\t\tborder: ${props => props.pixelSize / 20}px solid rgba(0,0,0,0);\n\t\tbackground-color: white;\n\t}\n\n`;\n\nconst LoseGame = ({status, portrait, pixelSize, theme3d, restartClick}) => (\n\t<CenterOverlay>\n\t\t<LoseContainer portrait={portrait} pixelSize={pixelSize} theme3d={theme3d}>\n\t\t\t<Title portrait={portrait}>Game Over</Title>\n\t\t\t<ContainerStatus>\n\t\t\t\t<StatusRow>SCORE: {status.score}</StatusRow>\n\t\t\t\t<StatusRow>LEVEL: {status.level}</StatusRow>\n\t\t\t\t<StatusRow>LINES: {status.lines}</StatusRow>\n\t\t\t</ContainerStatus>\n\t\t\t<ContainerButton portrait={portrait}>\n\t\t\t\t<Button pixelSize={pixelSize} onClick={() => restartClick()}>Restart</Button>\n\t\t\t</ContainerButton>\n\t\t</LoseContainer>\n\t</CenterOverlay>\n);\n\nexport default LoseGame;","import React, { useState, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport Switch from \"react-switch\";\n\nimport useWindowDimensions from \"../../hooks/useWindowDimensions\";\nimport background from \"../../images/background.jpg\";\nimport StatusRow from \"../StatusRow\";\nimport LoseGame from '../LoseGame';\n\nimport Color from \"color\";\n\nconst Game = styled.div`\n\twidth: 100vw;\n\theight: ${props => (props.portrait ? \"95\" : \"100\")}vh;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"column\" : \"row\")};\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-image: url(${background});\n\tbackground-size: cover;\n\tbackground-position: center;\n`;\n\nconst ContainerNext = styled.div`\n\t${props =>\n\t\t!props.portrait && `height: ${props.pixelSize * 18 + (18 / 3) * 1}px;`}\n\t${props => props.portrait && `width: ${props.pixelSize * 10 + (10 / 3) * 1}px;`}\n\tmargin-right: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-bottom: ${props => (props.portrait ? props.pixelSize / 3 : 0)}px;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"row\" : \"column\")};\n\tjustify-content: ${props => (props.portrait ? \"space-between\" : \"flex-start\")};\n\talign-items: center;\n`;\n\nconst Next = styled.div`\n\twidth: ${props => props.pixelSize * 3}px;\n\theight: ${props => props.pixelSize * 3}px;\n\tbackground-color: ${props => (props.theme3d ? \"#444\" : \"black\")};\n\ttransition: background-color 0.5;\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-bottom: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-right: ${props => (!props.portrait ? 0 : props.pixelSize / 3)}px;\n`;\n\nconst StyledStage = styled.div`\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\tbackground-color: ${props => (props.theme3d ? \"#444\" : \"black\")};\n\ttransition: background-color 0.5s;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst Center = styled.div`\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst Row = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\theight: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n`;\n\nconst Pixel = React.memo(styled.div`\n\twidth: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n\theight: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n\tbackground-color: ${props => (props.fill === 1 ? props.color : \"inherited\")};\n\tposition: relative;\n\tz-index: ${props => props.zIndex};\n\n\t${props =>\n\t\tprops.paused &&\n\t\t`\n\t\ttransition: all 1s;\n\t`};\n\n\t${props =>\n\t\tprops.fill &&\n\t\tprops.theme3d &&\n\t\t`;\n\t\tbox-shadow: ${props.pixelSize / 4.16}px ${props.pixelSize /\n\t\t\t4.16}px ${props.pixelSize / 5.55}px #222${\n\t\t\tprops.topBloco\n\t\t\t\t? `, 0 ${-props.pixelSize / 4.16}px 0 ${Color(props.color).lighten(0.2)}`\n\t\t\t\t: \"\"\n\t\t} \n\t`};\n\n\t${props =>\n\t\t!props.theme3d &&\n\t\t`\n\t\tborder-left: 1px solid ${\n\t\t\tprops.stage || props.fill || props.hint ? \"#222\" : \"black\"\n\t\t};\n\t\tborder-top: 1px solid ${\n\t\t\tprops.stage || props.fill || props.hint ? \"#222\" : \"black\"\n\t\t};\t\n\t`};\n\n\t${props =>\n\t\tprops.hint &&\n\t\t`\n\t\tborder: 1px solid ${Color(props.playerColor).alpha(0.5)};\n\t\tbackground-color: rgba(255,255,255,0.1);\n\t`};\n`);\n\nconst ContainerSwitch = styled.div`\n\t${props =>\n\t\tprops.portrait &&\n\t\t`\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tflex-direction: column;\n\t\tjustify-content: flex-end;\n\t`};\n`;\n\nconst ContainerStatus = styled.div`\n\twidth: ${props => props.pixelSize * 8}px;\n\t${props =>\n\t\t!props.portrait && `height: ${props.pixelSize * 18 + (18 / 3) * 1}px;`}\n\t${props => props.portrait && `width: ${props.pixelSize * 10 + (10 / 3) * 1}px;`}\n\tmargin-left: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-top: ${props => (props.portrait ? props.pixelSize / 3 : 0)}px;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"row\" : \"column\")};\n\talign-items: center;\n\tjustify-content: ${props => (props.portrait ? \"space-between\" : \"flex-start\")};\n\tfont-size: ${props => props.pixelSize}px;\n`;\n\nconst getRenderizacaoBloco = bloco => {\n\tlet trimRowBloco = [];\n\tlet sumColumn = {};\n\tbloco.forEach((row, y) => {\n\t\tlet rowSum = 0;\n\t\trow.forEach(pixel => (rowSum = rowSum + pixel));\n\t\tif (rowSum > 0) trimRowBloco.push(row);\n\t\trow.forEach((pixel, x) => {\n\t\t\tsumColumn[x] = (sumColumn[x] ? sumColumn[x] : 0) + pixel;\n\t\t});\n\t});\n\tlet trimBloco = [];\n\ttrimRowBloco.forEach((row, y) => {\n\t\tlet newRow = [];\n\t\trow.forEach((pixel, x) => {\n\t\t\tif (sumColumn[x] > 0) newRow.push(pixel);\n\t\t});\n\t\ttrimBloco.push(newRow);\n\t});\n\treturn trimBloco;\n};\n\nconst Stage = ({ lose, restartClick, map, player, hint, status, paused, ...others }) => {\n\tconst [pixelSize, setPixelSize] = useState(30);\n\tconst [portrait, setPortrait] = useState(false);\n\tconst { width, height } = useWindowDimensions();\n\tconst [theme3d, setTheme3d] = useState(false);\n\tconst [nextRender, setNextRender] = useState();\n\tconst stageRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tlet pixelSizeHeight = height / 20;\n\t\tlet pixelSizeWidth = width / 32;\n\t\tif (portrait) {\n\t\t\tpixelSizeHeight = height / 26;\n\t\t\tpixelSizeWidth = width / 12;\n\t\t}\n\t\tsetPixelSize(\n\t\t\tpixelSizeWidth < pixelSizeHeight ? pixelSizeWidth : pixelSizeHeight\n\t\t);\n\t\tsetPortrait(height > width);\n\t}, [width, height, portrait]);\n\n\tuseEffect(() => {\n\t\tif (!player.next) return;\n\t\tsetNextRender(getRenderizacaoBloco(player.next.bloco));\n\t}, [player.next]);\n\n\tuseEffect(() => {\n\t\tif (!lose) {\n\t\t\tstageRef.current.focus();\n\t\t}\n\t}, [lose]);\n\n\tuseEffect(() => {\n\t\tstageRef.current.focus();\n\t}, [theme3d]);\n\n\treturn (\n\t\t<div>\n\t\t\t<Game portrait={portrait}>\n\t\t\t\t{nextRender && (\n\t\t\t\t\t<ContainerNext portrait={portrait} pixelSize={pixelSize}>\n\t\t\t\t\t\t<Next portrait={portrait} theme3d={theme3d} pixelSize={pixelSize}>\n\t\t\t\t\t\t\t{nextRender.map((row, y) => (\n\t\t\t\t\t\t\t\t<Row pixelSize={pixelSize} key={`row-${y}`}>\n\t\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\n\t\t\t\t\t\t\t\t\t\tlet topBloco = pixel && (!nextRender[y - 1] || !nextRender[y - 1][x]);\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\t\tpaused={paused}\n\t\t\t\t\t\t\t\t\t\t\t\ttheme3d={theme3d}\n\t\t\t\t\t\t\t\t\t\t\t\ttopBloco={topBloco}\n\t\t\t\t\t\t\t\t\t\t\t\tzIndex={y}\n\t\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\n\t\t\t\t\t\t\t\t\t\t\t\tfill={pixel}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={player.next.color}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Next>\n\t\t\t\t\t\t<ContainerSwitch portrait={portrait}>\n\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\twidth={pixelSize * 2}\n\t\t\t\t\t\t\t\theight={pixelSize / 1.2}\n\t\t\t\t\t\t\t\tonChange={setTheme3d}\n\t\t\t\t\t\t\t\tchecked={theme3d}\n\t\t\t\t\t\t\t\toffColor=\"#000\"\n\t\t\t\t\t\t\t\tonColor=\"#444\"\n\t\t\t\t\t\t\t\tuncheckedIcon={\n\t\t\t\t\t\t\t\t\t<Center>\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\ttheme3d={false}\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize / 3}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tfill={1}\n\t\t\t\t\t\t\t\t\t\t\tcolor={\"#e54b4b\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcheckedIcon={\n\t\t\t\t\t\t\t\t\t<Center>\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\ttheme3d=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize / 3}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tfill={1}\n\t\t\t\t\t\t\t\t\t\t\tcolor={\"#e54b4b\"}\n\t\t\t\t\t\t\t\t\t\t\ttopBloco=\"true\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ContainerSwitch>\n\t\t\t\t\t</ContainerNext>\n\t\t\t\t)}\n\t\t\t\t{map && (\n\t\t\t\t\t<StyledStage ref={stageRef} {...others} theme3d={theme3d} pixelSize={pixelSize}>\n\t\t\t\t\t\t{map.map((row, y) => (\n\t\t\t\t\t\t\t<Row stage=\"true\" pixelSize={pixelSize} key={`row-${y}`}>\n\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\n\t\t\t\t\t\t\t\t\tlet playerFill =\n\t\t\t\t\t\t\t\t\t\tplayer.bloco.bloco[y - player.pos[0]] &&\n\t\t\t\t\t\t\t\t\t\tplayer.bloco.bloco[y - player.pos[0]][x - player.pos[1]];\n\t\t\t\t\t\t\t\t\tlet playerHint =\n\t\t\t\t\t\t\t\t\t\thint.bloco.bloco[y - hint.pos[0]] &&\n\t\t\t\t\t\t\t\t\t\thint.bloco.bloco[y - hint.pos[0]][x - hint.pos[1]];\n\t\t\t\t\t\t\t\t\tlet topBloco =\n\t\t\t\t\t\t\t\t\t\t(playerFill || pixel.fill) &&\n\t\t\t\t\t\t\t\t\t\t(!player.bloco.bloco[y - player.pos[0] - 1] ||\n\t\t\t\t\t\t\t\t\t\t\t!player.bloco.bloco[y - player.pos[0] - 1][x - player.pos[1]]) &&\n\t\t\t\t\t\t\t\t\t\t(!map[y - 1] || !map[y - 1][x].fill);\n\t\t\t\t\t\t\t\t\tlet zIndex = !playerFill && !pixel.fill && playerHint ? 99 : y;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\tpaused={paused}\n\t\t\t\t\t\t\t\t\t\t\ttheme3d={theme3d}\n\t\t\t\t\t\t\t\t\t\t\thint={!pixel.fill && !playerFill && playerHint}\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\n\t\t\t\t\t\t\t\t\t\t\tfill={pixel.fill || playerFill}\n\t\t\t\t\t\t\t\t\t\t\tcolor={playerFill ? player.bloco.color : pixel.color}\n\t\t\t\t\t\t\t\t\t\t\tplayerColor={player.bloco.color}\n\t\t\t\t\t\t\t\t\t\t\ttopBloco={topBloco}\n\t\t\t\t\t\t\t\t\t\t\tzIndex={zIndex}\n\t\t\t\t\t\t\t\t\t\t></Pixel>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</StyledStage>\n\t\t\t\t)}\n\t\t\t\t{status && (\n\t\t\t\t\t<ContainerStatus portrait={portrait} pixelSize={pixelSize}>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"SCORE\"\n\t\t\t\t\t\t\tvalue={status.score}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"LEVEL\"\n\t\t\t\t\t\t\tvalue={status.level}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"LINES\"\n\t\t\t\t\t\t\tvalue={status.lines}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ContainerStatus>\n\t\t\t\t)}\n\t\t\t</Game>\n\t\t\t{ lose && \n\t\t\t\t<LoseGame portrait={portrait} restartClick={restartClick} status={status} pixelSize={pixelSize} theme3d={theme3d}>\n\t\t\t\t</LoseGame>}\n\t\t</div>\n\t);\n};\n\nexport default Stage;\n","import styled from \"styled-components\";\n\nconst Center = styled.div`\n\twidth: 100vw;\n\theight: 100vh;\n\tborder: 1px solid red;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n`;\n\nexport default Center;\n","export const PrintPlayerInMap = (player, map) => {\n  var newMap = map.map(arr => arr.slice());\n  for (let y = 0; y < player.bloco.bloco.length; y++)\n    for (let x = 0; x < player.bloco.bloco.length; x++)\n      if (player.bloco.bloco[y][x] === 1) {\n        const pixelY = player.pos[0] + y;\n        const pixelX = player.pos[1] + x;\n        newMap[pixelY][pixelX] = { fill: 1, color: player.bloco.color };\n      }\n  return newMap;\n};","import React, { useState, useEffect } from \"react\";\nimport { useDrag } from \"react-use-gesture\";\nimport BarLoader from \"react-spinners/BarLoader\";\n\nimport Stage from \"../Stage\";\nimport { useInterval } from \"../../hooks/useInterval\";\nimport Center from \"../Center\";\nimport { PrintPlayerInMap } from \"../../utils/Utils\";\n\n//TODO: Alterar OnClick (rotatePlayer) para OnFastClick (criar hook)\n//TODO: Organização do componente \"Game\" (Separar codigo em hooks, outros components e funcoes)\n//TODO: Dar um tempo quando o bloco estiver no chão, mas o usuário mexendo\n\nconst STAGE_HEIGHT = 18;\nconst STAGE_WIDTH = 10;\n\nconst initialMap = [...new Array(STAGE_HEIGHT)].map(() =>\n\t[...new Array(STAGE_WIDTH)].map(() => ({ fill: 0, color: [] }))\n);\n\nconst colors = [\n\t\"#e54b4b\",\n\t\"#9a031e\",\n\t\"#fcdc4d\",\n\t\"#005397\",\n\t\"#0bbcd6\",\n\t\"#20ad65\",\n\t\"#f8ebee\"\n];\n\nconst I = {\n\tbloco: [\n\t\t[0, 0, 0, 0],\n\t\t[1, 1, 1, 1],\n\t\t[0, 0, 0, 0],\n\t\t[0, 0, 0, 0]\n\t]\n};\n\nconst O = {\n\tbloco: [\n\t\t[1, 1],\n\t\t[1, 1]\n\t]\n};\n\nconst T = {\n\tbloco: [\n\t\t[0, 0, 0],\n\t\t[1, 1, 1],\n\t\t[0, 1, 0]\n\t]\n};\n\nconst J = {\n\tbloco: [\n\t\t[0, 1, 0],\n\t\t[0, 1, 0],\n\t\t[1, 1, 0]\n\t]\n};\n\nconst L = {\n\tbloco: [\n\t\t[0, 1, 0],\n\t\t[0, 1, 0],\n\t\t[0, 1, 1]\n\t]\n};\n\nconst S = {\n\tbloco: [\n\t\t[0, 1, 1],\n\t\t[1, 1, 0],\n\t\t[0, 0, 0]\n\t]\n};\n\nconst Z = {\n\tbloco: [\n\t\t[1, 1, 0],\n\t\t[0, 1, 1],\n\t\t[0, 0, 0]\n\t]\n};\n\nconst getRandomBloco = () => {\n\tconst blocos = [I, O, T, J, L, S, Z];\n\tconst bloco = blocos[Math.floor(Math.random() * blocos.length)];\n\tbloco.color = colors[Math.floor(Math.random() * colors.length)];\n\treturn bloco;\n};\nconst getRandomPlayer = player => {\n\tlet bloco, next;\n\tif (player)\n\t\tif (player.next) {\n\t\t\tbloco = JSON.parse(JSON.stringify(player.next));\n\t\t\tnext = getRandomBloco();\n\t\t}\n\tif (!bloco) bloco = getRandomBloco();\n\tif (!next) next = getRandomBloco();\n\tconst pos = [0, Math.floor(STAGE_WIDTH / 2 - 2 / 2)];\n\treturn { pos, bloco, next };\n};\n\nconst Game = () => {\n\tconst [map, setMap] = useState(initialMap);\n\tconst [player, setPlayer] = useState();\n\tconst [down, setDown] = useState(false);\n\tconst [pause, setPause] = useState(false);\n\tconst [tick, setTick] = useState(Date.now());\n\tconst [hintPlayer, setHintPlayer] = useState();\n\tconst [spaceReleased, setSpaceReleased] = useState(true);\n\tconst [lines, setlines] = useState(0);\n\tconst [score, setScore] = useState(0);\n\tconst [level, setLevel] = useState(1);\n\tconst [dragX, setDragX] = useState(0);\n\tconst [dragY, setDragY] = useState(0);\n\tconst [gameOver, setGameOver] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst levelBaseScore = 1000;\n\t\tconst nextLevel = level + 1;\n\t\tconst nextLevelScore =\n\t\t\t(levelBaseScore * nextLevel * nextLevel * nextLevel) / 5;\n\t\tconsole.log(\"Current level: \", level);\n\t\tconsole.log(\"Score to next level:\", nextLevelScore);\n\t\tconsole.log(\"Remaining: \", nextLevelScore - score);\n\t\tif (score >= nextLevelScore) setLevel(level + 1);\n\t}, [level, score]);\n\n\tconst restartGame = () => {\n\t\tsetMap(initialMap); //TODO: lose game\n\t\tsetlines(0);\n\t\tsetScore(0);\n\t\tsetLevel(1);\n\t\tsetGameOver(false);\n\t}\n\n\tconst loseGame = () => {\n\t\tsetGameOver(true);\n\t};\n\n\tconst drop = () => {\n\t\tif (!player) {\n\t\t\tsetPlayer(getRandomPlayer());\n\t\t\treturn;\n\t\t}\n\t\tsetPlayer(player => {\n\t\t\tconst newPos = getNewPlayerPos(\"down\");\n\t\t\tif (player.pos === newPos) {\n\t\t\t\tsetMap(map => {\n\t\t\t\t\tconst mapWithPlayer = PrintPlayerInMap(player, map);\n\t\t\t\t\tconst mapCleared = checkMap(mapWithPlayer);\n\t\t\t\t\treturn mapCleared;\n\t\t\t\t});\n\t\t\t\tconst newPlayer = getRandomPlayer(player);\n\t\t\t\tif (!validatePosition(newPlayer.pos, newPlayer.bloco)) loseGame();\n\t\t\t\treturn newPlayer;\n\t\t\t}\n\t\t\treturn { ...player, pos: newPos };\n\t\t});\n\t};\n\n\tconst rotatePlayer = () => {\n\t\tconst clonedPlayer = JSON.parse(JSON.stringify(player));\n\t\tlet mtrx = clonedPlayer.bloco.bloco.map((_, index) =>\n\t\t\tclonedPlayer.bloco.bloco.map(column => column[index])\n\t\t);\n\t\tmtrx = mtrx.map(row => row.reverse());\n\t\tif (validatePosition(player.pos, { bloco: mtrx }))\n\t\t\tsetPlayer({ ...player, bloco: { ...player.bloco, bloco: mtrx } });\n\t};\n\n\tconst keyUp = ({ keyCode }) => {\n\t\tif (pause || gameOver)\n\t\t\treturn;\n\t\tconst THRESHOLD = 80;\n\t\t// Activate the interval again when user releases down arrow.\n\t\tif (keyCode === 40) {\n\t\t\tsetDown(false);\n\t\t\tif (Date.now() - tick <= THRESHOLD) drop();\n\t\t}\n\t\tif (keyCode === 32) setSpaceReleased(true);\n\t};\n\n\tconst forwardDown = () => {\n\t\tif (pause || gameOver)\n\t\t\treturn;\n\t\tsetPlayer(player => {\n\t\t\tconst playerCopy = JSON.parse(JSON.stringify(player));\n\t\t\tplayerCopy.pos = [...hintPlayer.pos];\n\t\t\tsetMap(map => {\n\t\t\t\tconst mapWithPlayer = PrintPlayerInMap(playerCopy, map);\n\t\t\t\tconst mapCleared = checkMap(mapWithPlayer);\n\t\t\t\treturn mapCleared;\n\t\t\t});\n\t\t\tconst newPlayer = getRandomPlayer(player);\n\t\t\tif (!validatePosition(newPlayer.pos, newPlayer.bloco)) loseGame();\n\t\t\treturn newPlayer;\n\t\t});\n\t};\n\n\tconst keyDown = ({ keyCode }) => {\n\t\tif (pause || gameOver)\n\t\t\treturn;\n\t\tswitch (keyCode) {\n\t\t\tcase 37:\n\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"left\") }));\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\trotatePlayer();\n\t\t\t\tbreak;\n\t\t\tcase 39:\n\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"right\") }));\n\t\t\t\tbreak;\n\t\t\tcase 40:\n\t\t\t\tsetTick(Date.now());\n\t\t\t\tsetDown(true);\n\t\t\t\tbreak;\n\t\t\tcase 32:\n\t\t\t\tif (spaceReleased) {\n\t\t\t\t\tsetSpaceReleased(false);\n\t\t\t\t\tforwardDown();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tconst checkMap = React.useCallback(\n\t\tmap => {\n\t\t\tlet rowsClear = [];\n\t\t\tmap.forEach((row, y) => {\n\t\t\t\tlet clear = true;\n\t\t\t\trow.forEach((pixel, x) => {\n\t\t\t\t\tif (pixel.fill === 0) clear = false;\n\t\t\t\t});\n\t\t\t\tif (clear) rowsClear.push(y);\n\t\t\t});\n\t\t\tif (rowsClear.length > 0) {\n\t\t\t\tlet newMap = map.slice();\n\t\t\t\trowsClear.forEach(y => {\n\t\t\t\t\tfor (let mapY = newMap.length - 1; mapY >= 0; mapY--)\n\t\t\t\t\t\tif (mapY <= y)\n\t\t\t\t\t\t\tif (mapY > 0) newMap[mapY] = newMap[mapY - 1];\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tnewMap[mapY] = [...new Array(STAGE_WIDTH)].map(() => ({\n\t\t\t\t\t\t\t\t\tfill: 0,\n\t\t\t\t\t\t\t\t\tcolor: []\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t});\n\t\t\t\tsetlines(quant => quant + rowsClear.length);\n\t\t\t\tconst bonusLevel = 100 * (level * level);\n\t\t\t\tconst bonusRows = 40 * (rowsClear.length * rowsClear.length - 1);\n\t\t\t\tsetScore(score => score + 300 * rowsClear.length + bonusRows + bonusLevel);\n\t\t\t\treturn newMap;\n\t\t\t}\n\t\t\treturn map;\n\t\t},\n\t\t[level]\n\t);\n\n\tconst validatePosition = React.useCallback(\n\t\t(pos, bloco) => {\n\t\t\tfor (let y = 0; y < bloco.bloco.length; y++)\n\t\t\t\tfor (let x = 0; x < bloco.bloco[y].length; x++)\n\t\t\t\t\tif (bloco.bloco[y][x] === 1) {\n\t\t\t\t\t\tlet mapY = pos[0] + y;\n\t\t\t\t\t\tlet mapX = pos[1] + x;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tmapY > STAGE_HEIGHT ||\n\t\t\t\t\t\t\tmapX < 0 ||\n\t\t\t\t\t\t\tmapX > STAGE_WIDTH ||\n\t\t\t\t\t\t\t!map[mapY] ||\n\t\t\t\t\t\t\t!map[mapY][mapX] ||\n\t\t\t\t\t\t\tmap[mapY][mapX].fill === 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t[map]\n\t);\n\n\tconst calculateHintPlayer = React.useCallback(\n\t\tplayer => {\n\t\t\tconst hintBloco = JSON.parse(JSON.stringify(player.bloco));\n\t\t\tlet hintPosition = [...player.pos];\n\t\t\twhile (validatePosition([hintPosition[0] + 1, hintPosition[1]], hintBloco))\n\t\t\t\thintPosition = [hintPosition[0] + 1, hintPosition[1]];\n\t\t\treturn { pos: hintPosition, bloco: hintBloco };\n\t\t},\n\t\t[validatePosition]\n\t);\n\n\tconst getNewPlayerPos = React.useCallback(\n\t\tmovement => {\n\t\t\tlet newPos;\n\t\t\tif (!player) return;\n\t\t\tif (movement === \"down\") newPos = [player.pos[0] + 1, player.pos[1]];\n\t\t\tif (movement === \"left\") newPos = [player.pos[0], player.pos[1] - 1];\n\t\t\tif (movement === \"right\") newPos = [player.pos[0], player.pos[1] + 1];\n\t\t\tif (!validatePosition(newPos, player.bloco)) return player.pos;\n\t\t\treturn newPos;\n\t\t},\n\t\t[player, validatePosition]\n\t);\n\n\tuseInterval(\n\t\t() => {\n\t\t\tdrop();\n\t\t},\n\t\t(pause || gameOver) ? null : down ? 50 : 450 - (level - 1) * 20\n\t);\n\n\tuseEffect(() => {\n\t\tif (!player) return;\n\t\tsetHintPlayer(calculateHintPlayer(player));\n\t}, [player, calculateHintPlayer]);\n\n\tconst bind = useDrag(\n\t\t({ down, movement: [mx, my], velocity }) => {\n\t\t\tconst THRESHOLD = 20;\n\t\t\tconst FORCE_THRESHOLD = 1;\n\t\t\tif (down) {\n\t\t\t\tif (Math.abs(mx - dragX) > THRESHOLD) {\n\t\t\t\t\tif (mx - dragX > 0)\n\t\t\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"right\") }));\n\t\t\t\t\telse setPlayer(player => ({ ...player, pos: getNewPlayerPos(\"left\") }));\n\t\t\t\t\tsetDragX(mx);\n\t\t\t\t}\n\t\t\t\tif (Math.abs(my - dragY) > THRESHOLD) {\n\t\t\t\t\tif (velocity > FORCE_THRESHOLD) {\n\t\t\t\t\t\tif (spaceReleased) {\n\t\t\t\t\t\t\tsetSpaceReleased(false);\n\t\t\t\t\t\t\tforwardDown();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (my - dragY > 0) drop();\n\t\t\t\t\tsetDragY(my);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetDragX(0);\n\t\t\t\tsetDragY(0);\n\t\t\t\tsetSpaceReleased(true);\n\t\t\t}\n\t\t},\n\t\t{ filterTaps: true, lockDirection: true }\n\t);\n\n\tif (!player || !map || !hintPlayer)\n\t\treturn (\n\t\t\t<Center>\n\t\t\t\t<BarLoader color={\"#C41212\"} />\n\t\t\t</Center>\n\t\t);\n\treturn (\n\t\t<Stage\n\t\t\tlose={gameOver}\n\t\t\trestartClick={() => restartGame()}\n\t\t\tmap={map}\n\t\t\tplayer={player}\n\t\t\thint={hintPlayer}\n\t\t\tpaused={pause}\n\t\t\tstatus={{ lines, score, level }}\n\t\t\tonBlur={() => setPause(true)}\n\t\t\tonFocus={() => setPause(false)}\n\t\t\ttabIndex=\"0\"\n\t\t\tonKeyUp={keyUp}\n\t\t\tonKeyDown={keyDown}\n\t\t\tonClick={() => rotatePlayer()}\n\t\t\t{...bind()}\n\t\t/>\n\t);\n};\n\nexport default Game;\n","import { useEffect, useRef } from \"react\";\n\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n","import React, { useState } from \"react\";\n\nimport StartPage from \"../StartPage\";\nimport Game from \"../Game\";\n\nconst Tetris = () => {\n\tconst [runing, setRuning] = useState(false);\n\treturn runing ? (\n\t\t<Game stopClick={() => setRuning(false)} />\n\t) : (\n\t\t<StartPage startClick={() => setRuning(true)} />\n\t);\n};\n\nexport default Tetris;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n","import React from \"react\";\nimport \"./styles.css\";\n\nimport Tetris from \"./components/Tetris\";\n\nexport default function App() {\n  return <Tetris />;\n}\n"],"sourceRoot":""}